(function(a,b){function m(b,d){if(a.isArray(b)){for(var e=b.length-1;e>=0;e--){var f=b[e];a.type(b)!=="object"&&(a.type(f)!=="string"||!c.transports[f])&&(d.log("Invalid transport: "+f+", removing it from the transports list."),b.splice(e,1))}b.length===0&&(d.log("No transports remain within the specified transport array."),b=null)}else a.type(b)!=="object"&&!c.transports[b]&&b!=="auto"&&(d.log("Invalid transport: "+b.toString()),b=null);return b}"use strict";if(typeof a!="function")throw new Error("SignalR: jQuery not found. Please ensure jQuery is referenced before the SignalR.js file.");if(!b.JSON)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");var c,d,e=b.document.readyState==="complete",f=a(b),g={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},h=function(a,c){if(c===!1)return;var d;if(typeof b.console=="undefined")return;d="["+(new Date).toTimeString()+"] SignalR: "+a,b.console.debug?b.console.debug(d):b.console.log&&b.console.log(d)},i=function(c){var d;return c=a.trim(c),c.indexOf("http")!==0?!1:(d=b.document.createElement("a"),d.href=c,d.protocol+d.host!==b.location.protocol+b.location.host)},j=function(b,c,d){return c===b.state?(b.state=d,a(b).triggerHandler(g.onStateChanged,[{oldState:c,newState:d}]),!0):!1},k=function(a){return a.state===c.connectionState.disconnected},l=function(a){var d,e=function(a){a.log("Couldn't reconnect within the configured timeout ("+a.disconnectTimeout+"ms), disconnecting."),a.stop(!1,!1)};a.reconnecting(function(){var a=this;d=b.setTimeout(function(){e(a)},a.disconnectTimeout)}),a.stateChanged(function(a){a.oldState===c.connectionState.reconnecting&&b.clearTimeout(d)})};c=function(a,b,d){return new c.fn.init(a,b,d)},c.events=g,c.changeState=j,c.isDisconnecting=k,c.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},c.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/hubs'></script>.")}},f.load(function(){e=!0}),c.fn=c.prototype={init:function(a,b,c){this.url=a,this.qs=b,typeof c=="boolean"&&(this.logging=c),l(this)},ajaxDataType:"json",logging:!1,state:c.connectionState.disconnected,groups:{},keepAliveData:{},reconnectDelay:2e3,disconnectTimeout:4e4,keepAliveTimeoutCount:2,keepAliveWarnAt:2/3,start:function(d,h){var k=this,l={waitForPageLoad:!0,transport:"auto",jsonp:!1},n,o=k._deferral||a.Deferred(),p=b.document.createElement("a");a.type(d)==="function"?h=d:a.type(d)==="object"&&(a.extend(l,d),a.type(l.callback)==="function"&&(h=l.callback)),l.transport=m(l.transport,k);if(!l.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");if(!e&&l.waitForPageLoad===!0)return f.load(function(){k._deferral=o,k.start(d,h)}),o.promise();if(j(k,c.connectionState.disconnected,c.connectionState.connecting)===!1)return o.resolve(k),o.promise();p.href=k.url,!p.protocol||p.protocol===":"?(k.protocol=b.document.location.protocol,k.host=b.document.location.host,k.baseUrl=k.protocol+"//"+k.host):(k.protocol=p.protocol,k.host=p.host,k.baseUrl=p.protocol+"//"+p.host),k.wsProtocol=k.protocol==="https:"?"wss://":"ws://",l.transport==="auto"&&l.jsonp===!0&&(l.transport="longPolling"),i(k.url)&&(k.log("Auto detected cross domain url."),l.transport==="auto"&&(l.transport=["webSockets","longPolling"]),l.jsonp||(l.jsonp=!a.support.cors,l.jsonp&&k.log("Using jsonp because this browser doesn't support CORS"))),k.ajaxDataType=l.jsonp?"jsonp":"json",a(k).bind(g.onStart,function(b,c){a.type(h)==="function"&&h.call(k),o.resolve(k)}),n=function(b,d){d=d||0;if(d>=b.length){k.transport||(a(k).triggerHandler(g.onError,"SignalR: No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization."),o.reject("SignalR: No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization."),k.stop());return}var e=b[d],h=a.type(e)==="object"?e:c.transports[e];if(e.indexOf("_")===0){n(b,d+1);return}h.start(k,function(){h.supportsKeepAlive&&k.keepAliveData.activated&&c.transports._logic.monitorKeepAlive(k),k.transport=h,j(k,c.connectionState.connecting,c.connectionState.connected),a(k).triggerHandler(g.onStart),f.unload(function(){k.stop(!1)})},function(){n(b,d+1)})};var q=k.url+"/negotiate";return k.log("Negotiating with '"+q+"'."),a.ajax({url:q,global:!1,cache:!1,type:"GET",data:{},dataType:k.ajaxDataType,error:function(b){a(k).triggerHandler(g.onError,[b.responseText]),o.reject("SignalR: Error during negotiation request: "+b.responseText),k.stop()},success:function(b){var d=k.keepAliveData;k.appRelativeUrl=b.Url,k.id=b.ConnectionId,k.webSocketServerUrl=b.WebSocketServerUrl,k.disconnectTimeout=b.DisconnectTimeout*1e3,b.KeepAlive?(b.KeepAlive*=1e3,d.activated=!0,d.timeout=b.KeepAlive*k.keepAliveTimeoutCount,d.timeoutWarning=d.timeout*k.keepAliveWarnAt,d.checkInterval=(d.timeout-d.timeoutWarning)/3):d.activated=!1;if(!b.ProtocolVersion||b.ProtocolVersion!=="1.1"){a(k).triggerHandler(g.onError,"SignalR: Incompatible protocol version."),o.reject("SignalR: Incompatible protocol version.");return}a(k).triggerHandler(g.onStarting);var e=[],f=[];a.each(c.transports,function(a){if(a==="webSockets"&&!b.TryWebSockets)return!0;f.push(a)}),a.isArray(l.transport)?a.each(l.transport,function(){var b=this;(a.type(b)==="object"||a.type(b)==="string"&&a.inArray(""+b,f)>=0)&&e.push(a.type(b)==="string"?""+b:b)}):a.type(l.transport)==="object"||a.inArray(l.transport,f)>=0?e.push(l.transport):e=f,n(e)}}),o.promise()},starting:function(b){var c=this;return a(c).bind(g.onStarting,function(a,d){b.call(c)}),c},send:function(a){var b=this;if(b.state===c.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(b.state===c.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return b.transport.send(b,a),b},received:function(b){var c=this;return a(c).bind(g.onReceived,function(a,d){b.call(c,d)}),c},stateChanged:function(b){var c=this;return a(c).bind(g.onStateChanged,function(a,d){b.call(c,d)}),c},error:function(b){var c=this;return a(c).bind(g.onError,function(a,d){b.call(c,d)}),c},disconnected:function(b){var c=this;return a(c).bind(g.onDisconnect,function(a,d){b.call(c)}),c},connectionSlow:function(b){var c=this;return a(c).bind(g.onConnectionSlow,function(a,d){b.call(c)}),c},reconnecting:function(b){var c=this;return a(c).bind(g.onReconnecting,function(a,d){b.call(c)}),c},reconnected:function(b){var c=this;return a(c).bind(g.onReconnect,function(a,d){b.call(c)}),c},stop:function(b,d){var e=this;if(e.state===c.connectionState.disconnected)return;try{e.transport&&(d!==!1&&e.transport.abort(e,b),e.transport.supportsKeepAlive&&e.keepAliveData.activated&&c.transports._logic.stopMonitoringKeepAlive(e),e.transport.stop(e),e.transport=null),a(e).triggerHandler(g.onDisconnect),delete e.messageId,delete e.groups,delete e.id,delete e._deferral}finally{j(e,e.state,c.connectionState.disconnected)}return e},log:function(a){h(a,this.logging)}},c.fn.init.prototype=c.fn,c.noConflict=function(){return a.connection===c&&(a.connection=d),c},a.connection&&(d=a.connection),a.connection=a.signalR=c})(window.jQuery,window),function(a,b){function f(e){var g=e.keepAliveData,h,i;e.state===c.connectionState.connected&&(h=new Date,h.setTime(h-g.lastKeepAlive),i=h.getTime(),i>=g.timeout?(e.log("Keep alive timed out.  Notifying transport that connection has been lost."),e.transport.lostConnection(e)):i>=g.timeoutWarning?g.userNotified||(e.log("Keep alive has been missed, connection may be dead/slow."),a(e).triggerHandler(d.onConnectionSlow),g.userNotified=!0):g.userNotified=!1),g.monitoring&&b.setTimeout(function(){f(e)},g.checkInterval)}"use strict";var c=a.signalR,d=a.signalR.events,e=a.signalR.changeState;c.transports={},c.transports._logic={addQs:function(c,d){return d.qs?typeof d.qs=="object"?c+"&"+a.param(d.qs):typeof d.qs=="string"?c+"&"+d.qs:c+"&"+b.escape(d.qs.toString()):c},getUrl:function(a,c,d,e){var f=c==="webSockets"?"":a.baseUrl,g=f+a.appRelativeUrl,h="transport="+c+"&connectionId="+b.escape(a.id),i=this.getGroups(a);return a.data&&(h+="&connectionData="+b.escape(a.data)),d?(e&&(g+="/reconnect"),a.messageId&&(h+="&messageId="+b.escape(a.messageId)),i.length!==0&&(h+="&groups="+b.escape(JSON.stringify(i)))):g+="/connect",g+="?"+h,g=this.addQs(g,a),g+="&tid="+Math.floor(Math.random()*11),g},maximizePersistentResponse:function(a){return{MessageId:a.C,Messages:a.M,Disconnect:typeof a.D!="undefined"?!0:!1,TimedOut:typeof a.T!="undefined"?!0:!1,LongPollDelay:a.L,ResetGroups:a.R,AddedGroups:a.G,RemovedGroups:a.g}},updateGroups:function(b,c,d,e){function f(c){a.each(c,function(a,c){b.groups["#"+c]=!0})}c?(b.groups={},f(c)):(d&&f(d),e&&a.each(e,function(a,c){delete b.groups["# "+c]}))},getGroups:function(b){var c=[];return b.groups&&a.each(b.groups,function(a,b){c.push(a.substr(1))}),c},ajaxSend:function(c,e){var f=c.url+"/send"+"?transport="+c.transport.name+"&connectionId="+b.escape(c.id);return f=this.addQs(f,c),a.ajax({url:f,global:!1,type:c.ajaxDataType==="jsonp"?"GET":"POST",dataType:c.ajaxDataType,data:{data:e},success:function(b){b&&a(c).triggerHandler(d.onReceived,[b])},error:function(b,e){if(e==="abort"||e==="parsererror"&&c.ajaxDataType==="jsonp")return;a(c).triggerHandler(d.onError,[b])}})},ajaxAbort:function(c,d){if(typeof c.transport=="undefined")return;d=typeof d=="undefined"?!0:d;var e=c.url+"/abort"+"?transport="+c.transport.name+"&connectionId="+b.escape(c.id);e=this.addQs(e,c),a.ajax({url:e,async:d,timeout:1e3,global:!1,type:"POST",dataType:c.ajaxDataType,data:{}}),c.log("Fired ajax abort async = "+d)},processMessages:function(b,c){var e;if(b.transport){var f=a(b);b.transport.supportsKeepAlive&&b.keepAliveData.activated&&this.updateKeepAlive(b);if(!c)return;e=this.maximizePersistentResponse(c);if(e.Disconnect){b.log("Disconnect command received from server"),b.stop(!1,!1);return}this.updateGroups(b,e.ResetGroups,e.AddedGroups,e.RemovedGroups),e.Messages&&a.each(e.Messages,function(){try{f.triggerHandler(d.onReceived,[this])}catch(c){b.log("Error raising received "+c),a(b).triggerHandler(d.onError,[c])}}),e.MessageId&&(b.messageId=e.MessageId)}},monitorKeepAlive:function(b){var c=b.keepAliveData,e=this;c.monitoring?b.log("Tried to monitor keep alive but it's already being monitored"):(c.monitoring=!0,e.updateKeepAlive(b),b.keepAliveData.reconnectKeepAliveUpdate=function(){e.updateKeepAlive(b)},a(b).bind(d.onReconnect,b.keepAliveData.reconnectKeepAliveUpdate),b.log("Now monitoring keep alive with a warning timeout of "+c.timeoutWarning+" and a connection lost timeout of "+c.timeout),f(b))},stopMonitoringKeepAlive:function(b){var c=b.keepAliveData;c.monitoring&&(c.monitoring=!1,a(b).unbind(d.onReconnect,b.keepAliveData.reconnectKeepAliveUpdate),c={},b.log("Stopping the monitoring of the keep alive"))},updateKeepAlive:function(a){a.keepAliveData.lastKeepAlive=new Date},ensureReconnectingState:function(b){return e(b,c.connectionState.connected,c.connectionState.reconnecting)===!0&&a(b).triggerHandler(d.onReconnecting),b.state===c.connectionState.reconnecting},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(a,b){"use strict";var c=a.signalR,d=a.signalR.events,e=a.signalR.changeState,f=c.transports._logic;c.transports.webSockets={name:"webSockets",supportsKeepAlive:!0,attemptingReconnect:!1,currentSocketID:0,send:function(a,b){a.socket.send(b)},start:function(g,h,i){var j,k=!1,l=this,m=!h,n=a(g);b.MozWebSocket&&(b.WebSocket=b.MozWebSocket);if(!b.WebSocket){i();return}g.socket||(g.webSocketServerUrl?j=g.webSocketServerUrl:j=g.wsProtocol+g.host,j+=f.getUrl(g,this.name,m),g.log("Connecting to websocket endpoint '"+j+"'"),g.socket=new b.WebSocket(j),g.socket.ID=++l.currentSocketID,g.socket.onopen=function(){k=!0,g.log("Websocket opened"),l.attemptingReconnect&&(l.attemptingReconnect=!1),h?h():e(g,c.connectionState.reconnecting,c.connectionState.connected)===!0&&n.triggerHandler(d.onReconnect)},g.socket.onclose=function(b){if(this.ID===l.currentSocketID){if(!k){i?i():m&&l.reconnect(g);return}typeof b.wasClean!="undefined"&&b.wasClean===!1?(a(g).triggerHandler(d.onError,[b.reason]),g.log("Unclean disconnect from websocket."+b.reason)):g.log("Websocket closed"),l.reconnect(g)}},g.socket.onmessage=function(c){var e=b.JSON.parse(c.data),h=a(g);e&&(a.isEmptyObject(e)||e.M?f.processMessages(g,e):h.triggerHandler(d.onReceived,[e]))})},reconnect:function(a){var d=this;a.state!==c.connectionState.disconnected&&(d.attemptingReconnect||(d.attemptingReconnect=!0),b.setTimeout(function(){d.attemptingReconnect&&d.stop(a),f.ensureReconnectingState(a)&&(a.log("Websocket reconnecting"),d.start(a))},a.reconnectDelay))},lostConnection:function(a){this.reconnect(a)},stop:function(a){a.socket!==null&&(a.log("Closing the Websocket"),a.socket.close(),a.socket=null)},abort:function(a){}}}(window.jQuery,window),function(a,b){"use strict";var c=a.signalR,d=a.signalR.events,e=a.signalR.changeState,f=c.transports._logic;c.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:!0,reconnectTimeout:!1,currentEventSourceID:0,timeOut:3e3,start:function(g,h,i){var j=this,k=!1,l=a(g),m=!h,n,o;g.eventSource&&(g.log("The connection already has an event source. Stopping it."),g.stop());if(!b.EventSource){i&&(g.log("This browser doesn't support SSE."),i());return}n=f.getUrl(g,this.name,m);try{g.log("Attempting to connect to SSE endpoint '"+n+"'"),g.eventSource=new b.EventSource(n),g.eventSource.ID=++j.currentEventSourceID}catch(p){g.log("EventSource failed trying to connect with error "+p.Message),i?i():(l.triggerHandler(d.onError,[p]),m&&j.reconnect(g));return}o=b.setTimeout(function(){k===!1&&(g.log("EventSource timed out trying to connect"),g.log("EventSource readyState: "+g.eventSource.readyState),m||j.stop(g),m?g.eventSource.readyState!==b.EventSource.CONNECTING&&g.eventSource.readyState!==b.EventSource.OPEN&&j.reconnect(g):i&&i())},j.timeOut),g.eventSource.addEventListener("open",function(a){g.log("EventSource connected"),o&&b.clearTimeout(o),j.reconnectTimeout&&b.clearTimeout(j.reconnectTimeout),k===!1&&(k=!0,h?h():e(g,c.connectionState.reconnecting,c.connectionState.connected)===!0&&l.triggerHandler(d.onReconnect))},!1),g.eventSource.addEventListener("message",function(a){if(a.data==="initialized")return;f.processMessages(g,b.JSON.parse(a.data))},!1),g.eventSource.addEventListener("error",function(a){if(this.ID===j.currentEventSourceID){if(!k){i&&i();return}g.log("EventSource readyState: "+g.eventSource.readyState),a.eventPhase===b.EventSource.CLOSED?(g.log("EventSource reconnecting due to the server connection ending"),j.reconnect(g)):(g.log("EventSource error"),l.triggerHandler(d.onError))}},!1)},reconnect:function(a){var c=this;c.reconnectTimeout=b.setTimeout(function(){c.stop(a),f.ensureReconnectingState(a)&&(a.log("EventSource reconnecting"),c.start(a))},a.reconnectDelay)},lostConnection:function(a){this.reconnect(a)},send:function(a,b){f.ajaxSend(a,b)},stop:function(a){a&&a.eventSource&&(a.log("EventSource calling close()"),a.eventSource.close(),a.eventSource=null,delete a.eventSource)},abort:function(a,b){f.ajaxAbort(a,b)}}}(window.jQuery,window),function(a,b){"use strict";var c=a.signalR,d=a.signalR.events,e=a.signalR.changeState,f=c.transports._logic;c.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:!0,timeOut:3e3,start:function(c,d,e){var g=this,h=f.foreverFrame.count+=1,i,j=a("<iframe data-signalr-connection-id='"+c.id+"' style='position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;' src=''></iframe>");if(b.EventSource){e&&(c.log("This browser supports SSE, skipping Forever Frame."),e());return}i=f.getUrl(c,this.name),i+="&frameId="+h,a("body").append(j),j.prop("src",i),f.foreverFrame.connections[h]=c,c.log("Binding to iframe's readystatechange event."),j.bind("readystatechange",function(){a.inArray(this.readyState,["loaded","complete"])>=0&&(c.log("Forever frame iframe readyState changed to "+this.readyState+", reconnecting"),g.reconnect(c))}),c.frame=j[0],c.frameId=h,d&&(c.onSuccess=d),b.setTimeout(function(){c.onSuccess&&(c.log("Failed to connect using forever frame source, it timed out after "+g.timeOut+"ms."),g.stop(c),e&&e())},g.timeOut)},reconnect:function(a){var c=this;b.setTimeout(function(){if(a.frame&&f.ensureReconnectingState(a)){var b=a.frame,d=f.getUrl(a,c.name,!0)+"&frameId="+a.frameId;a.log("Updating iframe src to '"+d+"'."),b.src=d}},a.reconnectDelay)},lostConnection:function(a){this.reconnect(a)},send:function(a,b){f.ajaxSend(a,b)},receive:function(b,c){var d;f.processMessages(b,c),b.frameMessageCount=(b.frameMessageCount||0)+1,b.frameMessageCount>50&&(b.frameMessageCount=0,d=b.frame.contentWindow||b.frame.contentDocument,d&&d.document&&a("body",d.document).empty())},stop:function(b){var c=null;if(b.frame){if(b.frame.stop)b.frame.stop();else try{c=b.frame.contentWindow||b.frame.contentDocument,c.document&&c.document.execCommand&&c.document.execCommand("Stop")}catch(d){b.log("SignalR: Error occured when stopping foreverFrame transport. Message = "+d.message)}a(b.frame).remove(),delete f.foreverFrame.connections[b.frameId],b.frame=null,b.frameId=null,delete b.frame,delete b.frameId,b.log("Stopping forever frame")}},abort:function(a,b){f.ajaxAbort(a,b)},getConnection:function(a){return f.foreverFrame.connections[a]},started:function(b){b.onSuccess?(b.onSuccess(),b.onSuccess=null,delete b.onSuccess):e(b,c.connectionState.reconnecting,c.connectionState.connected)===!0&&a(b).triggerHandler(d.onReconnect)}}}(window.jQuery,window),function(a,b){"use strict";var c=a.signalR,d=a.signalR.events,e=a.signalR.changeState,f=a.signalR.isDisconnecting,g=c.transports._logic;c.transports.longPolling={name:"longPolling",supportsKeepAlive:!1,reconnectDelay:3e3,start:function(h,i,j){var k=this,l=!1;h.pollXhr&&(h.log("Polling xhr requests already exists, aborting."),h.stop()),h.messageId=null,b.setTimeout(function(){(function j(m,n){var o=m.messageId,p=o===null,q=!p,r=g.getUrl(m,k.name,q,n),s=null,t=!1,u=function(){t===!1&&(h.log("Raising the reconnect event"),e(h,c.connectionState.reconnecting,c.connectionState.connected)===!0&&(a(m).triggerHandler(d.onReconnect),t=!0))};if(q===!0&&n===!0&&!g.ensureReconnectingState(h))return;h.log("Attempting to connect to '"+r+"' using longPolling."),m.pollXhr=a.ajax({url:r,global:!1,cache:!1,type:"GET",dataType:h.ajaxDataType,success:function(c){var d=0,e=!1,h;c&&(h=g.maximizePersistentResponse(c)),l===!1&&(i(),l=!0),n===!0&&u(),g.processMessages(m,c),h&&a.type(h.LongPollDelay)==="number"&&(d=h.LongPollDelay),h&&h.TimedOut&&(e=h.TimedOut);if(h&&h.Disconnect)return;if(f(m)===!0)return;d>0?b.setTimeout(function(){j(m,e)},d):j(m,e)},error:function(e,g){if(g==="abort"){h.log("Aborted xhr requst.");return}h.state!==c.connectionState.reconnecting&&(h.log("An error occurred using longPolling. Status = "+g+". "+e.responseText),a(m).triggerHandler(d.onError,[e.responseText])),b.clearTimeout(s),b.setTimeout(function(){f(m)===!1&&j(m,!0)},h.reconnectDelay)}}),n===!0&&(s=b.setTimeout(u,k.reconnectDelay))})(h),b.setTimeout(function(){l===!1&&(i(),l=!0)},150)},250)},lostConnection:function(a){throw new Error("Lost Connection not handled for LongPolling")},send:function(a,b){g.ajaxSend(a,b)},stop:function(a){a.pollXhr&&(a.pollXhr.abort(),a.pollXhr=null,delete a.pollXhr)},abort:function(a,b){g.ajaxAbort(a,b)}}}(window.jQuery,window),function(a,b){function f(a){return a+e}function g(b){return a.isFunction(b)?null:a.type(b)==="undefined"?null:b}function h(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1}function i(a,b){return new i.fn.init(a,b)}function j(b,c){var d={qs:null,logging:!1,useDefaultPath:!0};a.extend(d,c);if(!b||d.useDefaultPath)b=(b||"")+"/signalr";return new j.fn.init(b,d)}"use strict";var c=0,d={},e=".hubProxy";Array.prototype.hasOwnProperty("map")||(Array.prototype.map=function(a,b){var c=this,d,e=c.length,f=[];for(d=0;d<e;d+=1)c.hasOwnProperty(d)&&(f[d]=a.call(b,c[d],d,c));return f}),i.fn=i.prototype={init:function(a,b){this.state={},this.connection=a,this.hubName=b,this._={callbackMap:{}}},hasSubscriptions:function(){return h(this._.callbackMap)},on:function(b,c){var d=this,e=d._.callbackMap;return b=b.toLowerCase(),e[b]||(e[b]={}),e[b][c]=function(a,b){c.apply(d,b)},a(d).bind(f(b),e[b][c]),d},off:function(b,c){var d=this,e=d._.callbackMap,g;return b=b.toLowerCase(),g=e[b],g&&(g[c]?(a(d).unbind(f(b),g[c]),delete g[c],h(g)||delete e[b]):c||(a(d).unbind(f(b)),delete e[b])),d},invoke:function(e){var f=this,h=a.makeArray(arguments).slice(1),i=h.map(g),j={H:f.hubName,M:e,A:i,I:c},k=a.Deferred(),l=function(b){var c=f._maximizeHubResponse(b);a.extend(f.state,c.State),c.Error?(c.StackTrace&&f.connection.log(c.Error+"\n"+c.StackTrace),k.rejectWith(f,[c.Error])):k.resolveWith(f,[c.Result])};return d[c.toString()]={scope:f,method:l},c+=1,a.isEmptyObject(f.state)||(j.S=f.state),f.connection.send(b.JSON.stringify(j)),k.promise()},_maximizeHubResponse:function(a){return{State:a.S,Result:a.R,Id:a.I,Error:a.E,StackTrace:a.T}}},i.fn.init.prototype=i.fn,j.fn=j.prototype=a.connection(),j.fn.init=function(b,c){var e={qs:null,logging:!1,useDefaultPath:!0},g=this;a.extend(e,c),a.signalR.fn.init.call(g,b,e.qs,e.logging),g.proxies={},g.received(function(b){var c,e,h,i,j,k;if(!b)return;typeof b.I!="undefined"?(h=b.I.toString(),i=d[h],i&&(d[h]=null,delete d[h],i.method.call(i.scope,b))):(c=this._maximizeClientHubInvocation(b),g.log("Triggering client hub event '"+c.Method+"' on hub '"+c.Hub+"'."),j=c.Hub.toLowerCase(),k=c.Method.toLowerCase(),e=this.proxies[j],a.extend(e.state,c.State),a(e).triggerHandler(f(k),[c.Args]))})},j.fn._maximizeClientHubInvocation=function(a){return{Hub:a.H,Method:a.M,Args:a.A,State:a.S}},j.fn._registerSubscribedHubs=function(){this._subscribedToHubs||(this._subscribedToHubs=!0,this.starting(function(){var c=[];a.each(this.proxies,function(a){this.hasSubscriptions()&&c.push({name:a})}),this.data=b.JSON.stringify(c)}))},j.fn.createHubProxy=function(a){a=a.toLowerCase();var b=this.proxies[a];return b||(b=i(this,a),this.proxies[a]=b),this._registerSubscribedHubs(),b},j.fn.init.prototype=j.fn,a.hubConnection=j}(window.jQuery,window),function(a){a.signalR.version="1.0.0.rc1"}(window.jQuery)